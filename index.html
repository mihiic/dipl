<html lang="en">
<head>
    <link rel="stylesheet" href="style.css" type="text/css"/>

    <script id="frag-shader-3d" type="x-shader/x-fragment">
        precision mediump float;
        varying vec3 v_normal;
        uniform vec3 u_reverseLightDirection;

        uniform vec4 u_color;

        void main() {
            vec3 normal = normalize(v_normal);
            float light = max(dot(normal, u_reverseLightDirection), 0.1);
            gl_FragColor = u_color;
            gl_FragColor.rgb *= light;
        }
    </script>

    <script id="vert-shader-3d" type="x-shader/x-vertex">
        attribute vec4 a_position;
        attribute vec3 a_normal;
        attribute vec4 a_weights;

        uniform mat4 u_worldViewProjection;
        uniform mat4 u_worldInverseTranspose;
        uniform mat4 u_bone;

        varying vec3 v_normal;

        void main() {
            float counterWeight = 1.0 - a_weights[0];
            gl_Position = u_worldViewProjection * (
                u_bone * a_position * a_weights[0] +
                a_position * counterWeight
            );
            v_normal = mat3(u_worldInverseTranspose) * a_normal;
        }
    </script>

    <title>Mihael Medan - Diplomski</title>
</head>
<body>
<canvas id="main-canvas" width="600" height="600"></canvas>
<script src="engine/rendering/shaderUtils.js" type="module"></script>
<script src="engine/math/vec3.js" type="module"></script>
<script src="engine/math/mat4.js" type="module"></script>

<script src="index.js" type="module"></script>
</body>
</html>
